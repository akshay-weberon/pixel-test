<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://pixel-prsnl-ink.b-cdn.net/client.min.js" crossorigin="anonymous"
    referrerpolicy="no-referrer"></script>>
  </script>
  <script>
    const dispatchTrackingPxRequest = () => {
      let fp = "NA";
      let afp = "NA";
      let pixelUrl = undefined;
      const urlEncoded = encodeURIComponent(window.location.href);

      if (window.ClientJS) {
        console.log("ClientJS Script is fetched and available");
        const client = new ClientJS();
        const ua = client.getBrowserData().ua;
        const canvasPrint = client.getCanvasPrint();
        const fingerprint = client.getFingerprint();
        const customFingerprint = client.getCustomFingerprint(ua, canvasPrint);
        fp = fingerprint;
        afp = customFingerprint;
      } else {
        console.log("ClientJS Script is not fetched and is unavailable");
      }

      // Build the pixel URL
      pixelUrl = `https://developer15.prsnl.ink/px?vid=dummy&fp=${fp}&afp=${afp}&ue=${urlEncoded}&pid=nljtHu&cid=JQR3`;
      const image = document.createElement('img');
      image.src = pixelUrl;
      image.style.display = "none";
      document.body.append(image);
      image.onload = () => {
        console.log("tpx loaded successfully on the webpage")
      }
      image.onerror = () => {
        console.log("Error loading tpx on the webpage")
      }
    };
    dispatchTrackingPxRequest();
  </script>
  <title>Customer pixel test</title>
</head>

<body>
  <p>This is a GitHub pages page hosted for testing customer-based Pixel ID</p>
</body>

</html>
